webpackJsonp([7],{"/3jm":function(e,a,s){var r=s("bVlJ");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);s("rjj0")("41b9bef9",r,!0,{})},"/4RP":function(e,a,s){var r=s("k9Qa");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);s("rjj0")("7a77aac6",r,!0,{})},"0ZXJ":function(e,a){e.exports={render:function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticStyle:{"margin-bottom":"5px","min-width":"220px"}},[a("div",{attrs:{id:"geetest-captcha"}}),this._v(" "),a("p",{attrs:{id:"wait"}},[this._v(this._s(this.$t("el.form.code_placeholder")))])])},staticRenderFns:[]}},"0fjo":function(e,a,s){var r=s("VU/8")(s("aO7J"),s("Sgfy"),!1,function(e){s("/4RP")},null,null);e.exports=r.exports},"6mDc":function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{gtserver:"",user_id:"",captchaObj:{}}},created:function(){this.geetest("/geetest")},methods:{geetest:function(e){var a=this,s=function(e){a.captchaObj=e,$("#geetest-captcha").html()||e.appendTo("#geetest-captcha"),e.onReady(function(){$("#wait")[0].className="hide"}),e.onSuccess(function(){var s=e.getValidate();s.gtserver=a.gtserver,s.user_id=a.user_id,a.$emit("validate",s)})};$.ajax({url:e+"?t="+(new Date).getTime(),type:"get",dataType:"json",success:function(e){a.gtserver=e.gtserver,a.user_id=e.user_id,initGeetest({gt:e.gt,challenge:e.challenge,product:"popup",offline:!e.success,new_captcha:!0,width:"100%",lang:window.Language},s)}})},reset:function(){this.captchaObj.reset()}}}},Sgfy:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("section",{attrs:{id:"login-container"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3",attrs:{id:"login-wrapper"}},[s("div",{staticClass:"panel panel-primary animated flipInY"},[s("div",{staticClass:"panel-heading"},[s("h3",{staticClass:"panel-title"},[e._v("\n                          "+e._s(e.$t("el.form.sign_up"))+"\n                      ")])]),e._v(" "),s("div",{staticClass:"panel-body"},[s("p",[e._v(e._s(e.$t("el.form.already_a_member"))+"\n                          "),e._v(" "),s("router-link",{attrs:{to:"/login",exact:""}},[s("strong",[e._v(e._s(e.$t("el.form.sign_in")))])])],1),e._v(" "),s("form",{attrs:{role:"form"},on:{submit:function(a){return a.preventDefault(),e.validateBeforeSubmit(a)}}},[s("div",{staticClass:"form-group has-feedback",class:{"has-error":e.nameFlags.invalid,"has-success":e.nameFlags.valid}},[s("label",{attrs:{for:"exampleInputName"}},[e._v(e._s(e.$t("el.form.name")))]),e._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:{rules:{required:!0,regex:/^[\u4e00-\u9fa5_a-zA-Z0-9-]{2,16}$/,name_unique:!0}},expression:"{  rules: {required: true, regex: /^[\\u4e00-\\u9fa5_a-zA-Z0-9-]{2,16}$/, name_unique:true} }"},{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{name:"name","data-vv-delay":"500",type:"text",placeholder:e.$t("el.form.name_placeholder"),required:""},domProps:{value:e.form.name},on:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()},input:function(a){a.target.composing||e.$set(e.form,"name",a.target.value)}}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nameFlags.dirty||e.nameFlags.invalid,expression:"nameFlags.dirty || nameFlags.invalid"}],staticClass:"glyphicon form-control-feedback",class:{"glyphicon-warning-sign":e.nameFlags.invalid,"glyphicon-ok":e.nameFlags.valid}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"help-block"},[s("strong",[e._v(e._s(e.errors.first("name")))])])]),e._v(" "),s("div",{staticClass:"form-group has-feedback",class:{"has-error":e.emailFlags.invalid,"has-success":e.emailFlags.valid}},[s("label",{attrs:{for:"exampleInputEmail"}},[e._v(e._s(e.$t("el.form.email")))]),e._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email|email_unique",expression:"'required|email|email_unique'"},{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control",attrs:{name:"email",type:"email",placeholder:e.$t("el.form.email_placeholder"),required:""},domProps:{value:e.form.email},on:{input:function(a){a.target.composing||e.$set(e.form,"email",a.target.value)}}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.emailFlags.dirty||e.emailFlags.invalid,expression:"emailFlags.dirty || emailFlags.invalid"}],staticClass:"glyphicon form-control-feedback",class:{"glyphicon-warning-sign":e.emailFlags.invalid,"glyphicon-ok":e.emailFlags.valid}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"help-block"},[s("strong",[e._v(e._s(e.errors.first("email")))])])]),e._v(" "),s("div",{staticClass:"form-group has-feedback",class:{"has-error":e.passwordFlags.invalid,"has-success":e.passwordFlags.valid}},[s("label",{attrs:{for:"exampleInputPassword"}},[e._v(e._s(e.$t("el.form.password")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"},{name:"validate",rawName:"v-validate",value:"required|min:6|max:16|strength",expression:"'required|min:6|max:16|strength'"}],staticClass:"form-control",attrs:{name:"password",type:"password",placeholder:e.$t("el.form.password"),required:""},domProps:{value:e.form.password},on:{input:function(a){a.target.composing||e.$set(e.form,"password",a.target.value)}}}),e._v(" "),e.regex&&e.passwordFlags.valid?s("el-slider",{attrs:{max:3,"show-tooltip":!1,disabled:!0},model:{value:e.regex,callback:function(a){e.regex=a},expression:"regex"}}):e._e(),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.passwordFlags.dirty||e.passwordFlags.invalid,expression:"passwordFlags.dirty || passwordFlags.invalid"}],staticClass:"glyphicon form-control-feedback",class:{"glyphicon-warning-sign":e.passwordFlags.invalid,"glyphicon-ok":e.passwordFlags.valid}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help-block"},[s("strong",[e._v(e._s(e.errors.first("password")))])])],1),e._v(" "),s("div",{staticClass:"form-group has-feedback",class:{"has-error":e.passwordConfirmationFlags.invalid,"has-success":e.passwordConfirmationFlags.valid}},[s("label",{attrs:{for:"password_confirmation"}},[e._v(e._s(e.$t("el.form.confirm_password")))]),e._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"},{name:"model",rawName:"v-model",value:e.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",attrs:{name:"password_confirmation",type:"password",id:"password_confirmation",placeholder:e.$t("el.form.confirm_password")},domProps:{value:e.form.password_confirmation},on:{input:function(a){a.target.composing||e.$set(e.form,"password_confirmation",a.target.value)}}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.passwordConfirmationFlags.dirty||e.passwordConfirmationFlags.invalid,expression:"passwordConfirmationFlags.dirty || passwordConfirmationFlags.invalid"}],staticClass:"glyphicon form-control-feedback",class:{"glyphicon-warning-sign":e.passwordConfirmationFlags.invalid,"glyphicon-ok":e.passwordConfirmationFlags.valid}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password_confirmation"),expression:"errors.has('password_confirmation')"}],staticClass:"help-block"},[s("strong",[e._v(e._s(e.errors.first("password_confirmation")))])])]),e._v(" "),s("Geetest",{ref:"geetest",on:{validate:e.validate}}),e._v(" "),s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"submit",disabled:!e.formDirty||e.validateGeetest}},[e._v(e._s(e.$t("el.form.sign_up")))])],1)])])])])])},staticRenderFns:[]}},aO7J:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r,t=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=s("myZQ"),o=(r=i)&&r.__esModule?r:{default:r},n=s("sUu7");var l=new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$","g"),d=new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$","g"),c=new RegExp("(?=.{6,}).*","g");a.default={data:function(){return{form:{name:"",email:"",password:"",password_confirmation:""},geetest:{},regex:0}},created:function(){var e=this;this.$validator.rules.email_unique||n.Validator.extend("email_unique",{getMessage:function(e){return"该"+e+"已被使用."},validate:function(e){return new Promise(function(a){axios.get("/api/register/email/check?email="+e).then(function(e){return a({valid:e.data.success})})})}}),this.$validator.rules.name_unique||n.Validator.extend("name_unique",{getMessage:function(e){return"该"+e+"已被使用."},validate:function(e){return new Promise(function(a){axios.get("/api/register/name/check?name="+e).then(function(e){return a({valid:e.data.success})})})}}),this.$validator.rules.strength||n.Validator.extend("strength",{getMessage:function(e){return"您的"+e+"强度太低了."},validate:function(a){return new Promise(function(a){return l.test(e.form.password)?(e.regex=3,$(".el-slider__bar").addClass("slider-strong-regex"),$(".el-slider__bar").removeClass("slider-medium-regex"),$(".el-slider__bar").removeClass("slider-general-regex")):d.test(e.form.password)?(e.regex=2,$(".el-slider__bar").addClass("slider-medium-regex"),$(".el-slider__bar").removeClass("slider-general-regex"),$(".el-slider__bar").removeClass("slider-strong-regex")):c.test(e.form.password)&&(e.regex=1,$(".el-slider__bar").addClass("slider-general-regex"),$(".el-slider__bar").removeClass("slider-medium-regex"),$(".el-slider__bar").removeClass("slider-strong-regex")),a({valid:!0})})}}),this.$validator.updateDictionary({zh_CN:{attributes:{name:"用户名",email:"邮箱",password:"密码",password_confirmation:"确认密码"}}})},computed:t({},(0,n.mapFields)({nameFlags:"name",emailFlags:"email",passwordFlags:"password",passwordConfirmationFlags:"password_confirmation"}),{formDirty:function(){var e=this;return Object.keys(this.validataFields).some(function(a){return e.validataFields[a].dirty})},validateGeetest:function(){return $.isEmptyObject(this.geetest)}}),components:{Geetest:o.default},methods:{validate:function(e){this.geetest=e},validateBeforeSubmit:function(e){var a=this,s=this;s.$validator.validateAll().then(function(){s.validateGeetest?toastr.warning(a.$t("el.notification.code_warning")):s.register(e)}).catch(function(){toastr.error(s.$t("el.notification.submit_data_error"))})},register:function(e){var a=this;a.$loading(),axios.post("/api/register",a.form).then(function(e){"success"==e.data.status&&(localStorage.setItem(a.form.name+"_refresh_token",e.data.refresh_token),localStorage.access_token=e.data.access_token,a.$loading().close(),a.$router.push("/"))},function(e){a.$loading().close(),a.$refs.geetest.reset(),422==e.response.status?stack_error(e.response.data):toastr.error(e.response.status+" : Resource "+e.response.statusText)})}}}},bVlJ:function(e,a,s){(e.exports=s("FZ+f")(!1)).push([e.i,".hide[data-v-a035488a]{display:none}.show[data-v-a035488a]{display:block}",""])},k9Qa:function(e,a,s){(e.exports=s("FZ+f")(!1)).push([e.i,".el-slider__runway.disabled .el-slider__bar.slider-general-regex{background-color:red!important}.el-slider__runway.disabled .el-slider__bar.slider-medium-regex{background-color:#ffeb3b!important}.el-slider__runway.disabled .el-slider__bar.slider-strong-regex{background-color:#3bff80!important}",""])},myZQ:function(e,a,s){var r=s("VU/8")(s("6mDc"),s("0ZXJ"),!1,function(e){s("/3jm")},"data-v-a035488a",null);e.exports=r.exports}});