webpackJsonp([12],{AMGo:function(s,a){s.exports={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("el-tabs",{attrs:{value:"reset_password"}},[t("el-tab-pane",{attrs:{label:s.$t("el.page.reset_password"),name:"reset_password"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"ion-locked"}),s._v(" "+s._s(s.$t("el.page.reset_password")))]),s._v(" "),t("form",{staticClass:"col-sm-4 col-sm-offset-4",on:{submit:function(a){return a.preventDefault(),s.validateBeforeSubmit(a)}}},[t("div",{staticClass:"form-group has-feedback",class:{"has-error":s.oldPasswordFlags.invalid,"has-success":s.oldPasswordFlags.valid}},[t("label",{staticClass:"label-control",attrs:{for:"old_password"}},[s._v(s._s(s.$t("el.form.old_password")))]),s._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:s.user.old_password,expression:"user.old_password"}],staticClass:"form-control",attrs:{type:"password",name:"old_password"},domProps:{value:s.user.old_password},on:{input:function(a){a.target.composing||s.$set(s.user,"old_password",a.target.value)}}}),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:s.oldPasswordFlags.dirty||s.oldPasswordFlags.invalid,expression:"oldPasswordFlags.dirty || oldPasswordFlags.invalid"}],staticClass:"glyphicon form-control-feedback",class:{"glyphicon-warning-sign":s.oldPasswordFlags.invalid,"glyphicon-ok":s.oldPasswordFlags.valid}}),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:s.errors.has("old_password"),expression:"errors.has('old_password')"}],staticClass:"help-block"},[t("strong",[s._v(s._s(s.errors.first("old_password")))])])]),s._v(" "),t("div",{staticClass:"form-group has-feedback",class:{"has-error":s.PasswordFlags.invalid,"has-success":s.PasswordFlags.valid}},[t("label",{staticClass:"label-control",attrs:{for:"password"}},[s._v(s._s(s.$t("el.form.new_password")))]),s._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:16",expression:"'required|min:6|max:16'"},{name:"model",rawName:"v-model",value:s.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{name:"password","data-vv-delay":"500",type:"password"},domProps:{value:s.user.password},on:{input:function(a){a.target.composing||s.$set(s.user,"password",a.target.value)}}}),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:s.PasswordFlags.dirty||s.PasswordFlags.invalid,expression:"PasswordFlags.dirty || PasswordFlags.invalid"}],staticClass:"glyphicon form-control-feedback",class:{"glyphicon-warning-sign":s.PasswordFlags.invalid,"glyphicon-ok":s.PasswordFlags.valid}}),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:s.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help-block"},[t("strong",[s._v(s._s(s.errors.first("password")))])])]),s._v(" "),t("div",{staticClass:"form-group has-feedback",class:{"has-error":s.passwordConfirmationFlags.invalid,"has-success":s.passwordConfirmationFlags.valid}},[t("label",{staticClass:"label-control",attrs:{for:"password_confirmation"}},[s._v(s._s(s.$t("el.form.new_password_confirmation")))]),s._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"},{name:"model",rawName:"v-model",value:s.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-control",attrs:{"data-vv-delay":"500",type:"password",name:"password_confirmation"},domProps:{value:s.user.password_confirmation},on:{input:function(a){a.target.composing||s.$set(s.user,"password_confirmation",a.target.value)}}}),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:s.passwordConfirmationFlags.dirty||s.passwordConfirmationFlags.invalid,expression:"passwordConfirmationFlags.dirty || passwordConfirmationFlags.invalid"}],staticClass:"glyphicon form-control-feedback",class:{"glyphicon-warning-sign":s.passwordConfirmationFlags.invalid,"glyphicon-ok":s.passwordConfirmationFlags.valid}}),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:s.errors.has("password_confirmation"),expression:"errors.has('password_confirmation')"}],staticClass:"help-block"},[t("strong",[s._v(s._s(s.errors.first("password_confirmation")))])])]),s._v(" "),t("button",{staticClass:"btn btn-info",attrs:{type:"submit",disabled:!s.formDirty,name:"button"}},[s._v(s._s(s.$t("el.form.edit")))])])]),s._v(" "),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"ion-android-notifications"}),s._v(" "+s._s(s.$t("el.page.notification")))]),s._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel panel-default panel-md"},[t("div",{staticClass:"panel-body"},[t("h2",{staticStyle:{"font-size":"30px"}},[t("i",{staticClass:"ion-gear-b"}),s._v("  "+s._s(s.$t("el.page.email_notification"))+"\n                  ")]),s._v(" "),t("hr"),s._v(" "),t("form",{on:{submit:function(a){return a.preventDefault(),s.submit(a)}}},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-sm-3 control-label text-right",attrs:{for:"email_nitificat"}},[s._v(s._s(s.$t("el.form.open_email_notification")))]),s._v(" "),t("div",{staticClass:"col-sm-9"},[t("el-switch",{attrs:{name:"email_nitificat",id:"email_nitificat","on-color":"#13ce66","off-color":"#ff4949"},model:{value:s.email_notify_enabled,callback:function(a){s.email_notify_enabled=a},expression:"email_notify_enabled"}})],1)]),s._v(" "),t("div",{staticClass:"form-group"},[t("div",{},[t("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"submit",name:"button"}},[s._v(s._s(s.$t("el.form.apply")))])])])])])])])]),s._v(" "),s.show_type?t("el-tab-pane",{attrs:{name:"my_type",id:"type"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"ion-clipboard"}),s._v(" "+s._s(s.$t("el.page.my_type")))]),s._v(" "),s._l(s.types,function(a,e){return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-offset-4 col-md-4 col-sm-12"},[t("h3",[s._v(s._s(e))]),s._v(" "),s._l(a,function(a,e){return[t("el-steps",{attrs:{space:s.space}},s._l(a,function(s,a){return t("el-step",{key:s.id,class:{bg:a==e},attrs:{title:s.display_name}})}))]})],2)])})],2):s._e()],1)},staticRenderFns:[]}},"Et/M":function(s,a,t){var e=t("VU/8")(t("LFwA"),t("AMGo"),!1,function(s){t("ghzq")},null,null);s.exports=e.exports},LFwA:function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])}return s},o=t("em5V"),r=t("sUu7"),i=t("NYxO");a.default={data:function(){return{user:{old_password:"",password:"",password_confirmation:""},types:[],space:200,show_type:!1,email_notify_enabled:!0}},created:function(){var s=this;s.email_notify_enabled=s.$store.state.user.email_notify_enabled,s.$validator.updateDictionary({zh_CN:{attributes:{old_password:"旧密码",password:"新密码",password_confirmation:"确定新密码"}}}),s.space=s.$store.state.isPhone?75:200;for(var a=0;a<s.permissions.length;a++)"show-type"!=s.permissions[a].name||(s.show_type=!0,axios.get("/api/type/me").then(function(a){s.types=a.data}))},computed:e({},(0,r.mapFields)({oldPasswordFlags:"old_password",PasswordFlags:"password",passwordConfirmationFlags:"password_confirmation"}),{formDirty:function(){var s=this;return Object.keys(this.validataFields).some(function(a){return s.validataFields[a].dirty})}},(0,i.mapState)(["permissions"])),methods:{validateBeforeSubmit:function(){var s=this;s.$validator.validateAll().then(function(){s.updatePwd()}).catch(function(){toastr.error(s.$t("el.notification.submit_data_error"))})},updatePwd:function(){var s=this;this.errors.any()||axios.put("/api/user/changepwd",this.user).then(function(a){toastr.success(s.$t("el.notification.update_password")),s.$router.push("/")},function(s){422==s.response.status?(0,o.stack_error)(s.response.data.error.message):toastr.error(s.response.status+" : Resource "+s.response.statusText)})},submit:function(){axios.put("/api/setting/notification",{email_notify_enabled:this.email_notify_enabled}).then(function(s){console.log(s)})}}}},O6Fu:function(s,a,t){(s.exports=t("FZ+f")(!1)).push([s.i,".bg>div:first-child{background:#20a0ff!important;border-color:#20a0ff!important}@media (min-width:768px){.text-right{text-align:right}}",""])},em5V:function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.stack_error=function(s){var a="";Object.keys(s).map(function(t,e){var o=s[t];a+='<span style="color: #e74c3c">'+o[0]+"</span><br>"}),swal({title:"Error Text!",type:"error",text:a,html:!0})}},ghzq:function(s,a,t){var e=t("O6Fu");"string"==typeof e&&(e=[[s.i,e,""]]),e.locals&&(s.exports=e.locals);t("rjj0")("8efb92e4",e,!0,{})}});