webpackJsonp([18],{"3p97":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"a[data-v-7af11a2d]:focus,a[data-v-7af11a2d]:hover{text-decoration:none}a[data-v-7af11a2d]:focus{outline:none;outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}a[data-v-7af11a2d]:active,a[data-v-7af11a2d]:hover{outline:0}a[data-v-7af11a2d]{cursor:pointer;color:#337ab7;text-decoration:none}ol[data-v-7af11a2d],ul[data-v-7af11a2d]{margin-top:0;margin-bottom:10px}h3[data-v-7af11a2d],h4[data-v-7af11a2d],h5[data-v-7af11a2d]{margin-top:5px;font-weight:600}h5[data-v-7af11a2d]{font-size:12px}.file-manager[data-v-7af11a2d]{list-style:none outside none;margin:0;padding:0}.file-manager .my-progress[data-v-7af11a2d]{position:relative;line-height:1}.file-manager .my-progress-bar[data-v-7af11a2d]{padding-right:0;margin-right:0;vertical-align:middle;width:100%;margin-right:-55px;-webkit-box-sizing:border-box;box-sizing:border-box}.file-manager .my-progress-bar__outer[data-v-7af11a2d]{height:18px;border-radius:100px;background-color:#e4e8f1;overflow:hidden;position:relative;vertical-align:middle}.file-manager .my-progress-bar__inner[data-v-7af11a2d]{position:absolute;left:0;top:0;height:100%;background-color:#20a0ff;text-align:right;border-radius:100px;line-height:1}.file-manager .my-progress-bar__innerText[data-v-7af11a2d]{display:inline-block;vertical-align:middle;color:#fff;font-size:12px;margin:0 5px}.file-control.active[data-v-7af11a2d]{text-decoration:underline}.file-control[data-v-7af11a2d]{color:inherit;font-size:11px;margin-right:10px}.file-manager .hr-line-dashed[data-v-7af11a2d]{margin:15px 0}.hr-line-dashed[data-v-7af11a2d]{border-top:1px dashed #e7eaec;color:#fff;background-color:#fff;height:1px;margin:20px 0}.float-e-margins .btn[data-v-7af11a2d]{margin-bottom:5px}.folder-list li[data-v-7af11a2d]{height:30px;line-height:30px;border-bottom:1px solid #e7eaec;display:block}.folder-list li a[data-v-7af11a2d]{color:#666;padding:5px 0}.folder-list li i[data-v-7af11a2d]{margin-right:8px;color:#3d4d5d}.folder-list li .delete-folder[data-v-7af11a2d]{cursor:pointer;float:right}.file-box .file img[data-v-7af11a2d]{height:100px;width:100%}.file-manager h5.tag-title[data-v-7af11a2d]{margin-top:20px}ul.notes li[data-v-7af11a2d],ul.tag-list li[data-v-7af11a2d]{list-style:none}.tag-list li[data-v-7af11a2d]{float:left}.tag-list li a[data-v-7af11a2d]{font-size:10px;background-color:#f0f3f4;padding:5px 12px;color:inherit;border-radius:2px;border:1px solid #e7eaec;margin-right:5px;margin-top:5px;display:block}.file-box[data-v-7af11a2d],.no-padding[data-v-7af11a2d]{padding-left:0;padding-right:0}.file-box[data-v-7af11a2d]{float:left;width:220px}.file[data-v-7af11a2d]{border:1px solid #e7eaec;padding:0;background-color:#fff;position:relative;margin-bottom:20px;margin-right:20px}.corner[data-v-7af11a2d]{position:absolute;display:inline-block;width:0;height:0;line-height:0;border:.6em solid transparent;border-right:.6em solid #f1f1f1;border-bottom:.6em solid #f1f1f1;right:0;bottom:0}.file .icon[data-v-7af11a2d]{text-align:center}.file .icon[data-v-7af11a2d],.file .image[data-v-7af11a2d]{height:100px;overflow:hidden}.file .file-name[data-v-7af11a2d]{padding:0 10px 10px;background-color:#f8f8f8;border-top:1px solid #e7eaec;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.file .file-name p[data-v-7af11a2d]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:90%;display:inline-block;padding:-15px;margin:-12px 0}.file .icon i[data-v-7af11a2d]{font-size:70px;color:#dadada}.file .file-name .delete-file[data-v-7af11a2d],.file .file-name .update-file[data-v-7af11a2d]{cursor:pointer;color:#a6aaad}.file .file-name .i-btn[data-v-7af11a2d]{display:inline-block;float:right}input[type=file][data-v-7af11a2d]{display:block}.file-info-padding[data-v-7af11a2d]{padding-left:0}@media (max-width:768px){.file-box .file[data-v-7af11a2d]{border:1px solid #e7eaec;padding:0;background-color:#fff;position:relative;margin-bottom:20px;margin-right:0}.file-box[data-v-7af11a2d]{float:left;width:100%}.file-box[data-v-7af11a2d],.file-info-padding[data-v-7af11a2d]{padding-left:0;padding-right:0}}",""])},PtQy:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 col-xs-12 file-info-padding"},[a("div",{staticClass:"ibox float-e-margins"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"file-manager"},[a("div",{staticClass:"my-progress"},[a("div",{staticClass:"my-progress-bar"},[a("div",{staticClass:"my-progress-bar__outer"},[a("div",{staticClass:"my-progress-bar__inner",style:{width:e.proportion+"%"}},[a("div",{staticClass:"my-progress-bar__innerText"},[e._v(e._s(e.proportion_text))])])])])]),e._v(" "),a("h5",[e._v(e._s(e.$t("el.page.display"))+"ï¼š")]),e._v(" "),e._l(e.types,function(t,i){return a("a",{staticClass:"file-control",class:{active:i==e.showType},attrs:{href:"javascript:;"},on:{click:function(t){e.updateShowType(i)}}},[e._v(e._s(t))])}),e._v(" "),a("div",{staticClass:"hr-line-dashed"}),e._v(" "),a("button",{staticClass:"btn btn-primary btn-block",on:{click:function(t){e.showFile=!0}}},[e._v(e._s(e.$t("el.form.upload_file")))]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-block",on:{click:function(t){e.showFolder=!0}}},[e._v(e._s(e.$t("el.form.create_folder")))]),e._v(" "),a("div",{staticClass:"hr-line-dashed"}),e._v(" "),a("h5",[e._v(e._s(e.$t("el.page.folder")))]),e._v(" "),a("ul",{staticClass:"folder-list",staticStyle:{padding:"0"}},[a("li",{directives:[{name:"show",rawName:"v-show",value:e.upload.breadcrumbs&&"root"!=e.upload.folderName,expression:"upload.breadcrumbs && upload.folderName != 'root'"}]},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.getFileInfo(e.ParentDirectory(e.upload.breadcrumbs))}}},[a("i",{staticClass:"ion-folder"}),e._v(" ../")])]),e._v(" "),e._l(e.upload.subfolders,function(t,i){return a("li",[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){e.getFileInfo(t)}}},[a("i",{staticClass:"ion-folder"}),e._v(" "+e._s(t))]),e._v(" "),a("i",{staticClass:"delete-folder ion-trash-a",on:{click:function(a){e.deleteFolder(t)}}})])})],2),e._v(" "),a("div",{staticClass:"clearfix"})],2)])])]),e._v(" "),a("modal",{attrs:{show:e.showFolder,"show-footer":""},on:{confirm:e.newFolder,cancel:function(t){e.showFolder=!1}}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("el.form.create_folder")))]),e._v(" "),a("form",{staticClass:"form-horizontal",attrs:{role:"form"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label col-sm-3",attrs:{for:"folder"}},[e._v(e._s(e.$t("el.form.folder_name")))]),e._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.folder,expression:"folder"}],staticClass:"form-control",attrs:{type:"text",id:"folder",placeholder:e.$t("el.form.folder_name")},domProps:{value:e.folder},on:{input:function(t){t.target.composing||(e.folder=t.target.value)}}})])])])]),e._v(" "),a("modal",{attrs:{show:e.showFile,"show-footer":""},on:{confirm:e.uploadFile,cancel:function(t){e.showFile=!1}}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("el.form.upload_file")))]),e._v(" "),a("form",{staticClass:"form-horizontal",attrs:{role:"form",enctype:"multipart/form-data"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label col-sm-3",attrs:{for:"file"}},[e._v(e._s(e.$t("el.form.file")))]),e._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{staticClass:"form-control",attrs:{type:"file",id:"file",name:"file"},on:{change:e.change}})])]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label col-sm-3",attrs:{for:"file_name"}},[e._v(e._s(e.$t("el.form.file_name")))]),e._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.file_name,expression:"file_name"}],staticClass:"form-control",attrs:{type:"text",id:"file_name",name:"file_name",placeholder:e.$t("el.form.file_name")},domProps:{value:e.file_name},on:{input:function(t){t.target.composing||(e.file_name=t.target.value)}}})])])])]),e._v(" "),a("div",{staticClass:"no-padding col-md-9 col-xs-12 animated fadeInRight"},[a("div",{staticClass:"row"},[a("div",{staticClass:"no-padding col-xs-12"},e._l(e.upload.files,function(t,i){return e.isShow(t.mimeType)?a("div",{staticClass:"file-box animated pulse col-xs-12"},[a("div",{staticClass:"file"},[a("a",{attrs:{href:t.webPath,target:"_blank"}},[a("span",{staticClass:"corner"}),e._v(" "),a("div",{staticClass:"icon"},[t.mimeType?[t.mimeType.indexOf("image")>-1?a("div",{staticClass:"image"},[a("img",{staticClass:"img-responsive",attrs:{alt:"image",src:t.webPath}})]):e._e(),e._v(" "),t.mimeType.indexOf("video")>-1?a("i",{staticClass:"img-responsive ion-ios-film-outline"}):t.mimeType.indexOf("audio")>-1?a("i",{staticClass:"img-responsive ion-music-note"}):t.mimeType.indexOf("excel")>-1?a("i",{staticClass:"img-responsive ion-stats-bars"}):a("i",{staticClass:"img-responsive ion-document"})]:[a("i",{staticClass:"img-responsive ion-document"})]],2)]),e._v(" "),a("div",{staticClass:"file-name"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.showRemoveFileName,expression:"!showRemoveFileName"}],on:{dblclick:function(t){e.renameFileName(t)}}},[e._v(e._s(t.name))]),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.name,expression:"file.name"}],staticClass:"form-control",staticStyle:{height:"20px"},attrs:{type:"text",name:""},domProps:{value:t.name},on:{blur:function(a){e.renameFileNameBlur(a,t)},keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.blur(t)},function(a){if(!("button"in a)&&e._k(a.keyCode,"esc",27,a.key,"Escape"))return null;e.revoked(t)}],input:function(a){a.target.composing||e.$set(t,"name",a.target.value)}}}),e._v(" "),a("br"),e._v(" "),a("small",[e._v(e._s(e.$t("el.page.add_at")+":"+t.modified.split(" ")[0]))]),e._v(" "),a("div",{staticClass:"i-btn"},[a("i",{staticClass:"delete-file ion-trash-a",on:{click:function(a){e.deleteFile(t,i)}}})])])])]):e._e()}))])])],1)},staticRenderFns:[]}},cbmq:function(e,t,a){var i=a("3p97");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("39662490",i,!0,{})},gBFv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(a("2WXv")),o=s(a("qpT+"));function s(e){return e&&e.__esModule?e:{default:e}}var l=["B","kB","MB","GB","TB","PB"];t.default={components:{Modal:i.default},data:function(){return{showFile:!1,showFolder:!1,showRemoveFileName:!1,files:null,file_name:"",folder:"",upload:{},showType:"all",oldValue:"",digital:0,proportion:"0",proportion_text:"",file_system_digital_size:0,types:{all:this.$i18n.t("el.page.display_all"),image:this.$i18n.t("el.page.display_img"),video:this.$i18n.t("el.page.display_video"),audio:this.$i18n.t("el.page.display_audio"),excel:this.$i18n.t("el.page.display_document")}}},mounted:function(){this.getFileInfo(this.$route.query.folder),this.getFileSystemSize()},directives:{focus:{update:function(e){e.focus()}}},methods:{getFileSystemSize:function(){var e=this;this.file_system_digital_size=this.humanTurnDigital(o.default.user.filesystem),axios.get("/api/user/filesystemsize").then(function(t){e.digital=t.data.digital,e.proportion=t.data.digital/e.file_system_digital_size*100,e.proportion_text=t.data.human+"/"+o.default.user.filesystem},function(e){toastr.error(e.response.status+" : Resource "+e.response.statusText)})},uploadFile:function(){var e=this;if(this.files){var t=new FormData;t.append("file",this.files[0]),t.append("name",this.file_name),t.append("folder",this.upload.folder),axios.post("/api/user/upload",t).then(function(t){toastr.success(e.$t("el.notification.create_file")),e.upload.files.push(t.data),e.digital+=e.humanTurnDigital(t.data.size),e.proportion=e.digital/e.file_system_digital_size*100,e.proportion_text=e.digitalTurnHuman(e.digital)+"/"+o.default.user.filesystem,e.file_name="",e.showFile=!1},function(e){e.response.data.error?toastr.error(e.response.data.error.message):toastr.error(e.response.status+" : Resource "+e.response.statusText)})}else toastr.error("The file must be required")},change:function(e){this.files=e.target.files.length?e.target.files:""},getFileInfo:function(e){var t=this,a="/api/user/upload";e?a=a+"?folder="+e:e="/",axios.get(a).then(function(a){t.upload=a.data.data,t.upload.subfolders instanceof Array&&(t.upload.subfolders={}),t.$router.push(t.$route.path+"?folder="+e)})},newFolder:function(){var e=this;this.folder?"root"!=this.folder?this.folder.indexOf("/")>-1||this.folder.indexOf("\\")>-1?toastr.error(this.$t("el.notification.folder_no_subdirectory")):(this.path=this.upload.folder+"/"+this.folder,axios.post("/api/user/folder",{folder:this.path}).then(function(t){toastr.success(e.$t("el.notification.create_folder")),e.showFolder=!1,e.$set(e.upload.subfolders,e.path,e.folder),e.folder=""},function(e){toastr.error(e.response.status+" : "+e.response.statusText)})):toastr.error(this.$t("el.notification.folder_reserved")):toastr.error(this.$t("el.notification.folder_required"))},ParentDirectory:function(e){var t=[];for(var a in e)t.push(e[a]);return"root"==t[t.length-1]?"/":t[t.length-1]},updateShowType:function(e){this.showType=e},isShow:function(e){return"all"==this.showType||!!(e&&e.indexOf(this.showType)>-1)},deleteFolder:function(e){var t=this;axios.post("/api/folder/delete",{del_folder:e,folder:this.upload.folder}).then(function(a){toastr.success(t.$t("el.notification.delete_folder")),t.$delete(t.upload.subfolders,t.upload.folder+"/"+e)},function(e){toastr.error(e.response.status+" : Resource "+e.response.statusText)})},deleteFile:function(e,t){var a=this;axios.post("/api/user/file/delete",{path:e.fullPath}).then(function(i){toastr.success(a.$t("el.notification.delete_file")),a.upload.files.splice(t,1),a.digital-=a.humanTurnDigital(e.size),a.proportion=a.digital/a.file_system_digital_size*100,a.proportion_text=a.digitalTurnHuman(a.digital)+"/"+o.default.user.filesystem},function(e){toastr.error(e.status+" : Resource "+e.statusText)})},renameFileName:function(e){var t=e.target.parentNode.children[1];t.style.display="inline-block",this.oldValue=t.value,t.focus(),e.currentTarget.style.display="none"},blur:function(e){e.target.parentNode.children[0].style.display="inline-block",e.currentTarget.style.display="none"},renameFileNameBlur:function(e,t){e.target.parentNode.children[0].style.display="inline-block",e.currentTarget.style.display="none",t.name!=this.oldValue&&this.rename(t),this.oldValue=""},revoked:function(e){e.name=this.oldValue},rename:function(e){var t=this,a=new FormData,i=this.upload.folder+"/"+e.name;a.append("oldfilename",e.fullPath),a.append("newfilename",i),axios.post("api/user/file/rename",a).then(function(a){e.fullPath=i,toastr.success(t.$t("el.notification.file_rename"))},function(e){toastr.error(e.response.status+" : "+e.response.statusText)})},sizeIndex:function(e){for(var t=0;t<l.length;t++)if(l[t]==e)return t},humanTurnDigital:function(e){var t=parseFloat(e),a=e.indexOf(".")>-1?e.substring(e.indexOf(".")+3):e.replace(t,""),i=this.sizeIndex(a);return t*Math.pow(1024,i)},digitalTurnHuman:function(e){var t=parseInt(e),a=Math.floor((String(t).length-1)/3);return(t/Math.pow(1024,a)).toFixed(2)+l[a]}}}},pYjE:function(e,t,a){var i=a("VU/8")(a("gBFv"),a("PtQy"),!1,function(e){a("cbmq")},"data-v-7af11a2d",null);e.exports=i.exports},"qpT+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={user:{filesystem:"2GB"}}}});